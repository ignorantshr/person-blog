
[TOC]
# Redis分布式锁 todo

[一文讲透Redis分布式锁安全问题](https://cloud.tencent.com/developer/article/2332108)

看链接吧哈哈。

关键点：

- 死锁：给锁设置租期（过期时间）
- 过期时间评估不好，锁提前过期：守护线程，定时续期
- 锁被别人释放：锁写入唯一标识，释放锁先检查标识，再释放

- 租期
- 续租
- 锁释放时使用 lua 脚本保证原子性

